<div class="modal fade" id="modalEditar{{ producto[0] }}" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <form method="POST" action="/editar-producto/{{ producto[0] }}" class="needs-validation" novalidate>
          <div class="modal-content border-0 shadow-lg">
              <!-- Encabezado del modal -->
              <div class="modal-header bg-primary text-white">
                  <h5 class="modal-title fw-semibold">
                      <i class="bi bi-pencil-square me-2"></i>Editar Producto
                  </h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              
              <!-- Cuerpo del modal -->
              <div class="modal-body p-4">
                  <div class="mb-3">
                      <label for="nombre{{producto[0]}}" class="form-label fw-medium">Nombre del Producto</label>
                      <input type="text" class="form-control form-control-lg" id="nombre{{producto[0]}}" 
                             name="nombre" value="{{ producto[1] }}" required>
                      <div class="invalid-feedback">
                          Por favor ingrese un nombre válido
                      </div>
                  </div>
                  
                  <div class="row g-3">
                      <div class="col-md-6">
                          <label for="precio{{producto[0]}}" class="form-label fw-medium">Precio (C$)</label>
                          <div class="input-group">
                              <span class="input-group-text bg-light">C$</span>
                              <input type="number" step="0.01" class="form-control" id="precio{{producto[0]}}" 
                                     name="precio" value="{{ producto[2] }}" required>
                          </div>
                          <div class="invalid-feedback">
                              Ingrese un precio válido
                          </div>
                      </div>
                      
                      <div class="col-md-6">
                          <label for="categoria{{producto[0]}}" class="form-label fw-medium">Categoría</label>
                          <select class="form-select" id="categoria{{producto[0]}}" name="categoria" required>
                              {% for categoria in categorias %}
                              <option value="{{ categoria[0] }}" {% if categoria[0] == producto[4] %}selected{% endif %}>
                                  {{ categoria[1] }}
                              </option>
                              {% endfor %}
                          </select>
                      </div>
                  </div>
                  
                  <div class="mt-3">
                      <label for="imagen{{producto[0]}}" class="form-label fw-medium">URL de la Imagen</label>
                      <input type="url" class="form-control" id="imagen{{producto[0]}}" 
                             name="imagen" value="{{ producto[3] }}" placeholder="https://ejemplo.com/imagen.jpg">
                      <div class="form-text">Deje vacío para usar imagen predeterminada</div>
                  </div>
                  
                  <!-- Campo de descripción (si lo agregas posteriormente) -->
                  <!--
                  <div class="mt-3">
                      <label for="descripcion{{producto[0]}}" class="form-label fw-medium">Descripción</label>
                      <textarea class="form-control" id="descripcion{{producto[0]}}" 
                                name="descripcion" rows="2">{{ producto[6] or '' }}</textarea>
                  </div>
                  -->
              </div>
              
              <!-- Pie del modal -->
              <div class="modal-footer bg-light">
                  <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                      <i class="bi bi-x-circle me-1"></i> Cancelar
                  </button>
                  <button type="submit" class="btn btn-primary">
                      <i class="bi bi-check-circle me-1"></i> Guardar Cambios
                  </button>
              </div>
          </div>
      </form>
  </div>
</div>

<!-- Script para validación -->
<script>
// Validación de formulario con Bootstrap
(function() {
  'use strict'
  const forms = document.querySelectorAll('.needs-validation')
  
  Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
          }
          
          form.classList.add('was-validated')
      }, false)
  })
})()
</script>